# 图片拍摄时间水印工具 README

## 项目简介
这是一款基于 Python 开发的图片水印工具，能够自动读取图片 EXIF 信息中的拍摄日期，并将其作为水印添加到图片上。若图片无 EXIF 拍摄信息，工具会默认使用当前日期作为水印内容。支持批量处理单张图片或整个目录下的所有图片，同时提供水印字体大小、颜色和位置的自定义配置。


## 核心功能
- **自动获取拍摄日期**：优先读取图片 EXIF 信息中的 `DateTimeOriginal`/`DateTimeDigitized`/`DateTime` 标签，生成 `YYYY-MM-DD` 格式的日期水印。
- **批量/单文件处理**：支持输入单个图片文件路径或包含图片的目录路径，自动筛选 `jpg/jpeg/png/bmp` 格式文件。
- **水印自定义**：可配置水印的字体大小、RGB 颜色和位置（如右下角、居中、左上角等）。
- **跨平台字体适配**：自动检测并加载 macOS/Linux/Windows 系统默认字体，无合适字体时降级使用 Python 默认字体。
- **输出目录管理**：处理后的图片自动保存到原目录下的 `[原目录名]_watermark` 子文件夹，避免覆盖源文件。


## 环境依赖
### 1. 操作系统
支持 **Windows/macOS/Linux** 全平台。

### 2. 依赖库
工具依赖 Python 第三方库 `Pillow`（用于图片处理和 EXIF 读取），需提前安装：
```bash
pip install pillow
```
### 3. 快速启动
```bash
python image_watermark.py <图片路径/目录路径> [可选参数]
```
### 4.相关参数
| 参数名       | 类型   | 必选 / 可选 | 说明                                                                 | 默认值                  |
|--------------|--------|-------------|----------------------------------------------------------------------|-------------------------|
| `image_path` | 字符串 | 必选        | 单个图片文件路径（如 `./img.jpg`）或图片目录路径（如 `./photos`）    | -                       |
| `--font-size`| 整数   | 可选        | 水印字体大小（数值越大，字体越大）                                   | 30                      |
| `--color`    | 字符串 | 可选        | 水印颜色，格式为 RGB 逗号分隔值（如 `255,255,255` 为白色，`0,0,0` 为黑色） | 255,255,255（白色）     |
| `--position` | 字符串 | 可选        | 水印位置，支持 5 种选项：<br>`top_left`（左上角）、`top_right`（右上角）、`bottom_left`（左下角）、`bottom_right`（右下角）、`center`（居中） | bottom_right（右下角）  |
### 5.常见问题（FAQ）
- Q1：执行命令时提示「No module named 'PIL'」？
- A：未安装 Pillow 库，执行 pip install pillow 即可解决。
- Q2：图片处理后未显示拍摄日期，而是显示当前日期？
- A：该图片的 EXIF 信息中未包含拍摄时间标签（可能是图片被编辑后删除了 EXIF，或设备未记录拍摄时间），工具会自动降级使用当前日期。
- Q3：Windows 系统下提示「无法找到字体」？
- A：工具会优先读取 C:/Windows/Fonts/arial.ttf（系统默认 Arial 字体），若该字体被删除，会自动使用 Python 默认字体，不影响功能使用。
- Q4：处理 PNG 透明图片后，透明背景变成白色？
- A：为确保水印绘制兼容性，工具会将 RGBA 模式的透明图片转换为 RGB 模式（白色背景），这是正常处理逻辑。
